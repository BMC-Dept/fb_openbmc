From a72473cf62f6bed89c450523895ecea3f33e0d56 Mon Sep 17 00:00:00 2001
From: SeanChuangWiwynn <Sean_Chuang@wiwynn.com>
Date: Fri, 16 Aug 2024 15:05:37 +0800
Subject: [PATCH] REvise start time of phosphor-pid-control

---
 .../fans/phosphor-pid-control_%.bbappend         | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)
 create mode 100644 meta-facebook/meta-yosemite4/recipes-phosphor/fans/phosphor-pid-control_%.bbappend

diff --git a/meta-facebook/meta-yosemite4/recipes-phosphor/fans/phosphor-pid-control_%.bbappend b/meta-facebook/meta-yosemite4/recipes-phosphor/fans/phosphor-pid-control_%.bbappend
new file mode 100644
index 00000000000..2ecf19cc1a1
--- /dev/null
+++ b/meta-facebook/meta-yosemite4/recipes-phosphor/fans/phosphor-pid-control_%.bbappend
@@ -0,0 +1,16 @@
+FILESEXTRAPATHS:prepend := "${THISDIR}/${PN}:"
+
+FILES:${PN}:append = " ${datadir}/swampd"
+FILES:${PN}:append = " ${systemd_system_unitdir}/phosphor-pid-control.service.d/*.conf"
+
+do_install:append() {
+
+    override_dir="${D}${systemd_system_unitdir}/phosphor-pid-control.service.d"
+    override_file="${override_dir}/yosemite4.conf"
+    mkdir -p ${D}${systemd_system_unitdir}/phosphor-pid-control.service.d
+    echo "[Unit]" > ${override_file}
+    echo "After=multi-user.target" >> ${override_file}
+    echo "[Install]" > ${override_file}
+    echo "WantedBy=multi-user.target" >> ${override_file}
+
+}
-- 
2.25.1

