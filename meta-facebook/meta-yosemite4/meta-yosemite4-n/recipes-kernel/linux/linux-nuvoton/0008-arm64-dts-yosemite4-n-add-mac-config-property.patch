From 845551ec779c33756f5f2ce3b8939b9e9b35492f Mon Sep 17 00:00:00 2001
From: RickyWu-wiwynn <ricky_cx_wu@wiwynn.com>
Date: Mon, 13 May 2024 16:36:21 +0800
Subject: [PATCH 1/3] arm64: dts: yosemite4-n: add mac config property

To fix Mellanox cx7 cannot get IP after NIC re-plug.

This commit depends on the patch below:
[1] https://lore.kernel.org/all/20240118060041.1923700-1-Delphine_CC_Chiu@wiwynn.com/
---
 arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
index 05a161c747ff..faad229fd181 100644
--- a/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
+++ b/arch/arm64/boot/dts/nuvoton/nuvoton-npcm845-yosemite4.dts
@@ -206,7 +206,9 @@ &gmac2 {
 	pinctrl-0 = <&r1_pins
 			&r1oen_pins>;
 	use-ncsi;
-	mlx,multi-host;
+	mellanox,multi-host;
+	ncsi-ctrl,start-redo-probe;
+	ncsi-ctrl,no-channel-monitor;
 };
 
 &gmac3 {
@@ -215,7 +217,9 @@ &gmac3 {
 	pinctrl-0 = <&r2_pins
 			&r2oen_pins>;
 	use-ncsi;
-	mlx,multi-host;
+	mellanox,multi-host;
+	ncsi-ctrl,start-redo-probe;
+	ncsi-ctrl,no-channel-monitor;
 };
 
 &fiu0 {
-- 
2.25.1

